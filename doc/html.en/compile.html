<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Compile</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="compile">Compile </a></h1><h2><a class="anchor" id="windows">
Windows</a></h2>
<h2><a class="anchor" id="compile_new_project_windows">
Shade 9 Plugin Compile for windows</a></h2>
<h3><a class="anchor" id="compile_new_project_windows_step1">
1. Create a new project</a></h3>
<ul>
<li>From the File menu, select Create New &gt; Project. The New Project dialog appears. <br/>
 </li>
<li>From the list of project types, choose Visual C++ Project Win32. <br/>
 </li>
<li>From the templates on the right side, choose the Win32 Project template. <br/>
 </li>
<li>Enter a name for the project and click OK. <br/>
 </li>
<li>Next, the Win32 application wizard dialog is displayed. <br/>
 </li>
<li>Click on the Application Settings tab, and choose DLL for the application type. Check the box for empty application and then click Finish.</li>
</ul>
<h3><a class="anchor" id="compile_new_project_windows_step2">
2. Plugin Project Settings</a></h3>
<ul>
<li>Select a project from the Solution Explorer and display the Project Page dialog from the Menu properties. <br/>
 </li>
<li>Structure property &gt; C/C++ &gt; In the general Add Include directory, add the header file paths. The sample is below. Change it according to your project and the Plugin SDK location.</li>
</ul>
<div class="fragment"><pre class="fragment"> ../../include;../../boost_1_33_1
</pre></div><ul>
<li>Structure property &gt; C/C++ &gt; Under the Pre-processor Definition, add the following:</li>
</ul>
<div class="fragment"><pre class="fragment"> PLUGIN=1;STDCALL=__stdcall;DLLEXPORT=__declspec(dllexport);<span class="keywordflow">for</span>=<span class="keywordflow">if</span>(<span class="keyword">true</span>)<span class="keywordflow">for</span>
</pre></div><ul>
<li>A sample is below.</li>
</ul>
<div class="fragment"><pre class="fragment"> WIN32;NDEBUG;_WINDOWS;PLUGIN=1;STDCALL=__stdcall;DLLEXPORT=__declspec(dllexport);<span class="keywordflow">for</span>=<span class="keywordflow">if</span>(<span class="keyword">true</span>)<span class="keywordflow">for</span>
</pre></div><ul>
<li>Add the related SDK source code and the Plugin SDK vectors.cpp, com.cpp, and strings.cpp to the project.</li>
</ul>
<h2><a class="anchor" id="MacOSX">
MacOSX</a></h2>
<h2><a class="anchor" id="compile_new_project_mac">
How to create a new project for a Shade 9 plugin with Xcode 2.x</a></h2>
<h3><a class="anchor" id="compile_new_project_mac_step1">
1. Create a new project</a></h3>
<ul>
<li>Select New Project &gt; Cocoa Bundle from the File menu and click the Next button. <br/>
 </li>
<li>Name the project and click the Choose... button next to the Project Directory. Select the project folder and click Finish. <br/>
 </li>
<li>Select the Frameworks and Libraries inside the Groups &amp; Files tree in the Xcode window. Right-click or Ctrl-click and select Add &gt; Existing Frameworks... from the context menu to add a Carbon framework. <br/>
 </li>
<li>The added Carbon framework is Carbon.framework in the /System/Library/Frameworks folder.</li>
</ul>
<h3><a class="anchor" id="compile_new_project_mac_step2">
2. Plugin Project Settings</a></h3>
<ul>
<li>Groups &amp; Select the project name in Targets in the File tree, and display the Target project name Info with Get info(command+i). <br/>
 </li>
<li>Change the Wrapper Extension bundle to shdplugin. <br/>
 </li>
<li>The Shade 8 SDK include and boost_1_33_1 paths are listed in Header Search Paths. <br/>
 </li>
<li>Appends vectors.cpp and vectors.cpp in the Shade 8 Plugin SDK include to the Groups &amp; Files tree. <br/>
 </li>
<li>Add the following to the precompile header (normally the project name.pch) in the Groups &amp; Files tree.</li>
</ul>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &lt;Carbon/Carbon.h&gt;</span>
 
<span class="preprocessor"> #define MacOS 1</span>
<span class="preprocessor"></span><span class="preprocessor"> #define SXCARBON 1</span>
<span class="preprocessor"></span><span class="preprocessor"> #define PLUGIN 1</span>
<span class="preprocessor"></span><span class="preprocessor"> #define DLLEXPORT</span>
<span class="preprocessor"> #define STDCALL</span>
</pre></div><h2><a class="anchor" id="sample_code">
Creating a Plugin</a></h2>
<p>The minimum plugin sample source using plugin_interface is noted below.</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &quot;shadebuildnumber.h&quot;</span>
<span class="preprocessor"> #include &quot;shadetypes.h&quot;</span>
<span class="preprocessor"> #include &quot;plugininterface.h&quot;</span>
<span class="preprocessor"> #include &quot;shadeinterface.h&quot;</span>
<span class="preprocessor"> #include &quot;pluginids.h&quot;</span>
<span class="preprocessor"> #include &quot;<a class="code" href="dllentries_8h.html">dllentries.h</a>&quot;</span>
 
<span class="preprocessor"> #define hello_shade_id uuid_class(&quot;6930d807-b0cf-4159-9d8a-27d8674bd52c&quot;)</span>
<span class="preprocessor"></span> 
 <span class="keyword">struct </span>helloshade_plugin_component : plugin_interface {
         <span class="keyword">virtual</span> <span class="keywordtype">void</span> do_it (shade_interface *shade, scene_interface *scene, <span class="keywordtype">void</span> *aux = 0) {
                 shade-&gt;message(<span class="stringliteral">&quot;Hello Shade!&quot;</span>);
         }
         <span class="keyword">virtual</span> <span class="keywordtype">int</span> get_shade_version ()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> SHADE_BUILD_NUMBER; }
         <span class="keyword">virtual</span> uuid_class <a class="code" href="dllentries_8h.html#aa885da437906315adb191d63e82f873d" title="Returns the plugin ID.">get_uuid</a> (<span class="keywordtype">void</span> *) { <span class="keywordflow">return</span> hello_shade_id; }
 };
 
 <span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">void</span> STDCALL <a class="code" href="dllentries_8h.html#adc94c8f16008f9bf0fe6c86082bdb86f" title="Creates a new plugin interface object.">create_interface</a> (<span class="keyword">const</span> IID &amp;iid, <span class="keywordtype">int</span> i, <span class="keywordtype">void</span> **p, shade_interface *shade, <span class="keywordtype">void</span> *) { 
         <a class="code" href="classunknown__interface.html">unknown_interface</a> *u = <span class="keyword">new</span> helloshade_plugin_component;
         u-&gt;AddRef();
         *p = (<span class="keywordtype">void</span> *)u;
 }
 <span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keywordtype">int</span> STDCALL <a class="code" href="dllentries_8h.html#a77be18c81060298895eacfbc0a58b81d" title="Returns the number of plugin interface objects.">has_interface</a> (<span class="keyword">const</span> IID &amp;iid, shade_interface *shade) { 
         <span class="keywordflow">if</span> (iid == plugin_iid) <span class="keywordflow">return</span> 1; 
         <span class="keywordflow">return</span> 0; 
 }
 <span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * STDCALL <a class="code" href="dllentries_8h.html#a6f2ba000248080d52ec51c4260586bc0" title="Returns the name of the plugin interface.">get_name</a> (<span class="keyword">const</span> IID &amp;iid, <span class="keywordtype">int</span> i, shade_interface *shade, <span class="keywordtype">void</span> *) { <span class="keywordflow">return</span> <span class="stringliteral">&quot;HelloShade&quot;</span>; }
 <span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> uuid_class STDCALL <a class="code" href="dllentries_8h.html#aa885da437906315adb191d63e82f873d" title="Returns the plugin ID.">get_uuid</a> (<span class="keyword">const</span> IID &amp;iid, <span class="keywordtype">int</span> i, <span class="keywordtype">void</span> *) { <span class="keywordflow">return</span> hello_shade_id; }
</pre></div><p>Sample acquisition</p>
<p>Backwards-compatible plugin IDs used to require applying on the Shade support page, but in Shade 8 you can get the plugin ID by using the UUID generated by the plugin to uuid_class (returned by <a class="el" href="dllentries_8h.html#aa885da437906315adb191d63e82f873d" title="Returns the plugin ID.">get_uuid()</a>).</p>
<p>See <a class="el" href="pluginid.html">Plugin IDs</a> for how to generate UUIDs. </p>
</div>
<br><br>
<hr>
<div align="center">Copyright &copy; e frontier, Inc. All rights reserved.</div>
</body></html>
